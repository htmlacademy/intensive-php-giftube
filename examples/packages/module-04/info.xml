<?xml version="1.0" encoding="utf-8"?>
<examples>
    <example name="HTTP-заголовки" index="1">
        <description>to do</description>
        <files>
            <file name="headers.php" main="false" show="true">
                <states>
                    <state>Вначале объявим список заголовков, которые нас интересуют. Дадим каждому заголовку
                        описательное имя
                    </state>
                    <state>В цикле для каждого заголовка получим имя ключа в массиве $_SERVER</state>
                    <state>Проверяем, что в массиве $_SERVER есть заголовок с таким ключом</state>
                    <state>Выводим на экран описание каждого заголовка вместе с его значением</state>
                </states>
            </file>
            <file name="headers2.php" main="false" show="true">
                <states/>
            </file>
            <file name="index.php" main="false" show="true">
                <states/>
            </file>
        </files>
    </example>
    <example name="Параметры запроса" index="2">
        <description>to do</description>
        <files>
            <file name="data.php" main="false" show="true">
                <states>
                    <state>Подключаем массив с двумя гифками и функцию-шаблонизатор</state>
                    <state>Определяем переменную, в который поместим массив с найденной гифкой</state>
                    <state>Проверяем существование параметра запроса с идентификатором переменной</state>
                    <state>Обходим весь список гифок и ищем там гифку с ID равным полученным из параметра запроса
                    </state>
                    <state>Если переменная $gif ничего не содержит, значит гифку мы не нашли. В этом случае
                        устанавливаем код ответа в 404 - страница не найдена
                    </state>
                    <state>Подключаем лейаут и шаблон страницы. Выводим результат на экран</state>
                </states>
            </file>
            <file name="templates/layout.php" main="false" show="false">
                <states/>
            </file>
            <file name="templates/view.php" main="false" show="true">
                <states/>
            </file>
            <file name="view.php" main="false" show="true">
                <states/>
            </file>
        </files>
    </example>
    <example name="Данные из формы" index="3">
        <description>to do</description>
        <files>
            <file name="add.php" main="false" show="true">
                <states>
                    <state>Вначале убедимся, что форма была отправлена. Для этого проверяем метод, которым была
                        запрошена страница. Если метод POST - значит этот сценарий был вызван отправкой формы
                    </state>
                    <state>Проверим, был ли загружен файл. Поле для загрузки файла в форме называется 'gif_img', поэтому
                        нам следует искать в массиве $_FILES одноименный ключ. Если таковой найден, то мы можем получить
                        имя загруженного файла
                    </state>
                    <state>Выполняем копирование загруженного файла в директорию, где хранятся все гифки</state>
                    <state>Проверяем существование переменной $path - в ней должно быть название файла. Если переменная
                        существует, то добавляем в массив с гифкой новое значение - путь к изображению
                    </state>
                    <state>Подключаем шаблон страницы просмотра гифки. В этот шаблон мы передаем ассоциативный массив
                        гифки
                    </state>
                    <state>Если форма не была отправлены, то мы должны показать страницу с этой формой</state>
                    <state>Подключаем лейаут и шаблон страницы. Выводим результат на экран</state>
                </states>
            </file>
            <file name="templates/add.php" main="false" show="true">
                <states/>
            </file>
            <file name="templates/layout.php" main="false" show="false">
                <states/>
            </file>
            <file name="templates/view.php" main="false" show="true">
                <states/>
            </file>
        </files>
    </example>
    <example name="Валидация формы" index="4">
        <description>to do</description>
        <files>
            <file name="add.php" main="false" show="true">
                <states>
                    <state>Вначале убедимся, что форма была отправлена. Для этого проверяем метод, которым была
                        запрошена страница. Если метод POST - значит этот сценарий был вызван отправкой формы
                    </state>
                    <state>В массиве $_POST содержатся все данные из формы. Копируем его в переменную $gif. Затем мы
                        должны определить список полей, которые собираемся валидировать. Каждому полю также надо дать
                        описательное название, чтобы показывать его при выводе ошибок. Также мы определяем пустой массив
                        $errors, который будем заполнять ошибками валидации
                    </state>
                    <state>Обходим массив $_POST. Здесь в переменной $key будет имя поля (из аттрибута name), а в
                        переменной $value - его значение (то что ввел пользователь). Далее мы проверяем существование
                        каждого поля в списке обязательных к заполнению. И если оно там есть, а также поле не заполнено,
                        то добавляем ошибку валидации в список ошибок
                    </state>
                    <state>Проверим, был ли загружен файл. Поле для загрузки файла в форме называется 'gif_img', поэтому
                        нам следует искать в массиве $_FILES одноименный ключ. Если таковой найден, то мы можем получить
                        имя загруженного файла
                    </state>
                    <state>С помощью стандартной функции finfo_ можно получить информацию о типе файле</state>
                    <state>Если тип загруженного файла не является Gif-анимацией, то добавляем новую ошибку в список
                        ошибок валидации
                    </state>
                    <state>Если файл соответствует ожидаемому типу, то мы копируем его в директорию где лежат все гифки,
                        а также добавляем путь к загруженной гифки в массив $gif
                    </state>
                    <state>Загрузка файла - обязательное условие успешной валидации формы. Поэтому если он не был
                        загружен, добавляем ошибку
                    </state>
                    <state>Здесь мы проверяем длину массива с ошибками. Если он не пустой, значит были ошибки и мы
                        должны показать их пользователю вместе с формой. Для этого подключаем шаблон формы и передаем
                        туда массив, где будут заполненные поля, а также список ошибок
                    </state>
                    <state>Если массив ошибок пуст, значит валидации прошла успешно. По сценарию в этом случае
                        показываем страницу просмотра гифки, где будут данные из формы
                    </state>
                    <state>Если метод не POST, значит форма не была отправлена и валидировать ничего не надо, поэтому
                        просто подключаем шаблон показа формы
                    </state>
                    <state>Подключаем лейаут и передаем туда шаблон страницы. Выводим результат на экран</state>
                </states>
            </file>
            <file name="templates/add.php" main="false" show="true">
                <states/>
            </file>
            <file name="templates/layout.php" main="false" show="true">
                <states/>
            </file>
            <file name="templates/view.php" main="false" show="true">
                <states/>
            </file>
        </files>
    </example>
</examples>
